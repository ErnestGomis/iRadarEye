<?php
    if($_POST) { 
      $geocodeData = getGeocodeData($_POST['searchAddress']); 
      if($geocodeData) {         
         $latitude = $geocodeData[0];
         $longitude = $geocodeData[1];
         $address = $geocodeData[2];                     
?>     
<div id="gmap">Cargando mapa...</div>
<iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d1490.1951984635648!2d-0.8897282384751197!3d41.6689113893635!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0xd5914a2dbaef783%3A0xcefbedb5510a16d!2sUup!5e0!3m2!1ses!2ses!4v1535631076018" width="100%" height="100%" frameborder="0" style="border:0" allowfullscreen></iframe>
<script type="text/javascript">
   function init_map() {
      var options = {
         zoom: 14,
         center: new google.maps.LatLng(<?php echo $latitude; ?>, <?php echo $longitude; ?>),
         mapTypeId: google.maps.MapTypeId.ROADMAP
      };
      map = new google.maps.Map($("#gmap")[0], options);
      marker = new google.maps.Marker({
         map: map,
         position: new google.maps.LatLng(<?php echo $latitude; ?>, <?php echo $longitude; ?>)
      });
      infowindow = new google.maps.InfoWindow({
          content: "<?php echo $address; ?>"
      });
      google.maps.event.addListener(marker, "click", function () {
           infowindow.open(map, marker);
      });
   }
   google.maps.event.addDomListener(window, 'load', init_map);
</script> 
<?php 
        else {
        echo "Detalles incorrectos!";
     }

     ?>
     <?php 
if($responseData['status']=='OK') {
        $latitude = isset($responseData['results'][0]['geometry']['location']['lat']) ? $responseData['results'][0]['geometry']['location']['lat'] : "";
        $longitude = isset($responseData['results'][0]['geometry']['location']['lng']) ? $responseData['results'][0]['geometry']['location']['lng'] : "";
        $formattedAddress = isset($responseData['results'][0]['formatted_address']) ? $responseData['results'][0]['formatted_address'] : "";         
        if($latitude && $longitude && $formattedAddress) {         
            $geocodeData = array();                         
            array_push(
                $geocodeData, 
                $latitude, 
                $longitude, 
                $formattedAddress
            );             
            return $geocodeData;             
        } else {
            return false;
        }         
    } else {
        echo "ERROR: {$responseData['status']}";
        return false;
    }
    ?>